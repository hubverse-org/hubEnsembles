<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>hubEnsembles • hubEnsembles</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="hubEnsembles">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubEnsembles</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.9.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="active nav-item"><a class="nav-link" href="../articles/hubEnsembles.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubEnsembles/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>hubEnsembles</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubEnsembles/blob/main/vignettes/articles/hubEnsembles.Rmd" class="external-link"><code>vignettes/articles/hubEnsembles.Rmd</code></a></small>
      <div class="d-none name"><code>hubEnsembles.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>hubEnsembles</code> package provides a flexible framework
for aggregating model outputs, such as forecasts or projections, that
are submitted to a hub by multiple models and combined into ensemble
model outputs. The package includes two main functions:
<code>simple_ensemble</code> and <code>linear_pool</code>. We illustrate
these functions in this vignette, and briefly compare them.</p>
<p>This vignette uses the following R packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hubverse-org/hubUtils" class="external-link">hubUtils</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hubverse-org/hubVis" class="external-link">hubVis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hubverse-org/hubEnsembles" class="external-link">hubEnsembles</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-data-a-forecast-hub">Example data: a forecast hub<a class="anchor" aria-label="anchor" href="#example-data-a-forecast-hub"></a>
</h2>
<p>We will use an example hub provided by the hubverse to demonstrate
the functionality of the <code>hubEnsembles</code> package. This example
hub was generated with modified forecasts from the FluSight forecasting
challenge, a collaborative modeling exercise run by the US Centers for
Disease Control and Prevention (CDC) since 2013 that solicits seasonal
influenza forecasts from outside modeling teams. The example hub
includes both example model output data and target data (sometimes known
as “truth” data), which are stored in the <code>hubExamples</code>
package as data objects named <code>forecast_outputs</code> and
<code>forecast_target_ts</code>. Note that the toy model outputs contain
predictions for only a small subset rows of select dates, locations, and
output type IDs, far fewer than an actual modeling hub would typically
collect.</p>
<p>The model output data includes quantile, mean and median forecasts of
future incident influenza hospitalizations and PMF forecasts of
hospitalization intensity (categories determined by threshold of weekly
hospital admissions per 100,000 population). Each forecast is made for
five task ID variables, including the location for which the forecast
was made (<code>location</code>), the date on which the forecast was
made (<code>reference_date</code>), the number of steps ahead
(<code>horizon</code>), the date of the forecast prediction (a
combination of the date the forecast was made and the forecast horizon,
<code>target_end_date</code>), and the forecast target
(<code>target</code>). Below we print a subset of this example model
output.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">output_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="st">"median"</span>, <span class="st">"pmf"</span><span class="op">)</span>,</span>
<span>    <span class="va">output_type_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span>, <span class="cn">NA</span>, <span class="st">"low"</span>, <span class="st">"moderate"</span>, <span class="st">"high"</span>, <span class="st">"very high"</span><span class="op">)</span>,</span>
<span>    <span class="va">reference_date</span> <span class="op">==</span> <span class="st">"2022-12-17"</span>,</span>
<span>    <span class="va">location</span> <span class="op">==</span> <span class="st">"25"</span>,</span>
<span>    <span class="va">horizon</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 9</span></span></span>
<span><span class="co">#&gt;    model_id          reference_date target                    horizon location target_end_date output_type output_type_id        value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Flusight-baseline 2022-12-17     wk inc flu hosp                 1 25       2022-12-24      quantile    0.25           566         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Flusight-baseline 2022-12-17     wk inc flu hosp                 1 25       2022-12-24      quantile    0.75           598         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Flusight-baseline 2022-12-17     wk inc flu hosp                 1 25       2022-12-24      median      <span style="color: #BB0000;">NA</span>             582         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Flusight-baseline 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         low              0.000<span style="text-decoration: underline;">009</span>70</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Flusight-baseline 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         moderate         0.002<span style="text-decoration: underline;">94</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Flusight-baseline 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         high             0.073<span style="text-decoration: underline;">5</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Flusight-baseline 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         very high        0.924     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> MOBS-GLEAM_FLUH   2022-12-17     wk inc flu hosp                 1 25       2022-12-24      quantile    0.25           563         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> MOBS-GLEAM_FLUH   2022-12-17     wk inc flu hosp                 1 25       2022-12-24      quantile    0.75           803         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> MOBS-GLEAM_FLUH   2022-12-17     wk inc flu hosp                 1 25       2022-12-24      median      <span style="color: #BB0000;">NA</span>             664         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre></div>
<p>We also have corresponding target data included in the
<code>hubExamples</code> package. The example target data provide
observed incident influenza hospitalizations (<code>observation</code>)
in a given week (<code>date</code>) and for a given location
(<code>location</code>). This target data could be used as calibration
data for generating forecasts or for evaluating the forecasts post hoc.
The forecast-specific task ID variables <code>reference_date</code> and
<code>horizon</code> are not relevant for the target data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_target_ts</a></span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">#&gt;    date       location observation</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020-01-11 01                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020-01-11 15                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-01-11 18                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020-01-11 27                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020-01-11 30                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020-01-11 37                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-01-11 48                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020-01-11 US                 1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020-01-18 01                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020-01-18 15                 0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-ensembles-with-simple_ensemble">Creating ensembles with <code>simple_ensemble</code><a class="anchor" aria-label="anchor" href="#creating-ensembles-with-simple_ensemble"></a>
</h2>
<p>The <code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> function directly computes an
ensemble from component model outputs by combining them via some
function within each unique combination of task ID variables, output
types, and output type IDs. This function can be used to summarize
predictions of output types mean, median, quantile, CDF, and PMF. The
mechanics of the ensemble calculations are the same for each of the
output types, though the resulting statistical ensembling method differs
for different output types.</p>
<p>By default, <code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> uses the mean for the
aggregation function and equal weights for all models, though the user
can create different types of weighted ensembles by specifying an
aggregation function and weights.</p>
<p>Using the default options for <code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code>, we can
generate an equally weighted mean ensemble for each unique combination
of values for the task ID variables, the <code>output_type</code> and
the <code>output_type_id</code>. This means different ensemble methods
will be used for different output types: for the <code>quantile</code>
output type in our example data, the resulting ensemble is a quantile
average, while for the mean, CDF, PMF output type, the ensemble is a
linear pool. We must filter the sample output type because it is not yet
supported.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mean_ens</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">output_type</span> <span class="op">!=</span> <span class="st">"sample"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/simple_ensemble.html">simple_ensemble</a></span><span class="op">(</span></span>
<span>    model_id <span class="op">=</span> <span class="st">"simple-ensemble-mean"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The resulting model output has the same structure as the original
model output data, with columns for model ID, task ID variables, output
type, output type ID, and value. We also use
<code>model_id = "simple-ensemble-mean"</code> to change the name of
this ensemble in the resulting model output; if not specified, the
default will be “hub-ensemble”. A subset of the predictions is printed
below.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mean_ens</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">output_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="st">"median"</span>, <span class="st">"pmf"</span><span class="op">)</span>,</span>
<span>    <span class="va">output_type_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fl">0.025</span>, <span class="fl">0.25</span>, <span class="fl">0.75</span>, <span class="fl">0.975</span>, <span class="cn">NA</span>,</span>
<span>      <span class="st">"low"</span>, <span class="st">"moderate"</span>, <span class="st">"high"</span>, <span class="st">"very high"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="va">reference_date</span> <span class="op">==</span> <span class="st">"2022-12-17"</span>,</span>
<span>    <span class="va">location</span> <span class="op">==</span> <span class="st">"25"</span>,</span>
<span>    <span class="va">horizon</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 9</span></span></span>
<span><span class="co">#&gt;   model_id             reference_date target                    horizon location target_end_date output_type output_type_id     value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> simple-ensemble-mean 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         high             0.151  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> simple-ensemble-mean 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         low              0.004<span style="text-decoration: underline;">37</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> simple-ensemble-mean 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         moderate         0.023<span style="text-decoration: underline;">3</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> simple-ensemble-mean 2022-12-17     wk flu hosp rate category       1 25       2022-12-24      pmf         very high        0.821  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> simple-ensemble-mean 2022-12-17     wk inc flu hosp                 1 25       2022-12-24      median      <span style="color: #BB0000;">NA</span>             620.     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> simple-ensemble-mean 2022-12-17     wk inc flu hosp                 1 25       2022-12-24      quantile    0.25           542.     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> simple-ensemble-mean 2022-12-17     wk inc flu hosp                 1 25       2022-12-24      quantile    0.75           704.</span></span></code></pre></div>
<div class="section level3">
<h3 id="changing-the-aggregation-function">Changing the aggregation function<a class="anchor" aria-label="anchor" href="#changing-the-aggregation-function"></a>
</h3>
<p>We can change the function that is used to aggregate model outputs.
For example, we may want to calculate a median of the component models’
submitted values for each quantile. We do so by specifying
<code>agg_fun = median</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">median_ens</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">output_type</span> <span class="op">!=</span> <span class="st">"sample"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/simple_ensemble.html">simple_ensemble</a></span><span class="op">(</span></span>
<span>    agg_fun <span class="op">=</span> <span class="va">median</span>,</span>
<span>    model_id <span class="op">=</span> <span class="st">"simple-ensemble-median"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Custom functions can also be passed into the <code>agg_fun</code>
argument. We illustrate this by defining a custom function to compute
the ensemble prediction as a geometric mean of the component model
predictions. Any custom function to be used must have an argument
<code>x</code> for the vector of numeric values to summarize, and if
relevant, an argument <code>w</code> of numeric weights.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">geometric_mean</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">geometric_mean_ens</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">output_type</span> <span class="op">!=</span> <span class="st">"sample"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/simple_ensemble.html">simple_ensemble</a></span><span class="op">(</span></span>
<span>    agg_fun <span class="op">=</span> <span class="va">geometric_mean</span>,</span>
<span>    model_id <span class="op">=</span> <span class="st">"simple-ensemble-geometric"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>As expected, the mean, median, and geometric mean each give us
slightly different resulting ensembles. The median point estimates, 50%
prediction intervals, and 90% prediction intervals in the figure below
demonstrate this. Note that the geometric mean ensemble and simple mean
ensemble generate similar estimates in this case of predicting weekly
incident influenza hospitalizations in Massachusetts.</p>
<p><img src="hubEnsembles_files/figure-html/plot-ensembles-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="weighting-model-contributions">Weighting model contributions<a class="anchor" aria-label="anchor" href="#weighting-model-contributions"></a>
</h3>
<p>We can weight the contributions of each model in the ensemble using
the <code>weights</code> argument of <code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code>.
This argument takes a <code>data.frame</code> that should include a
<code>model_id</code> column containing each unique model ID and a
<code>weight</code> column. In the following example, we include the
baseline model in the ensemble, but give it less weight than the other
forecasts.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  model_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MOBS-GLEAM_FLUH"</span>, <span class="st">"PSI-DICE"</span>, <span class="st">"Flusight-baseline"</span><span class="op">)</span>,</span>
<span>  weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">weighted_mean_ens</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">output_type</span> <span class="op">!=</span> <span class="st">"sample"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/simple_ensemble.html">simple_ensemble</a></span><span class="op">(</span></span>
<span>    weights <span class="op">=</span> <span class="va">model_weights</span>,</span>
<span>    model_id <span class="op">=</span> <span class="st">"simple-ensemble-weighted-mean"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">weighted_mean_ens</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 9</span></span></span>
<span><span class="co">#&gt;    model_id                      reference_date target           horizon location target_end_date output_type output_type_id  value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.25           0.012<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.5            0.115 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.75           0.546 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1              0.805 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.25           0.910 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.5            0.964 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.75           0.989 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10             1     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10.25          1     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> simple-ensemble-weighted-mean 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10.5           1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="creating-ensembles-with-linear_pool">Creating ensembles with <code>linear_pool</code><a class="anchor" aria-label="anchor" href="#creating-ensembles-with-linear_pool"></a>
</h2>
<p>The <code><a href="../reference/linear_pool.html">linear_pool()</a></code> function implements the linear opinion
pool (LOP, also known as a distributional mixture) method when
ensembling predictions. This function can be used to combine predictions
with output types mean, quantile, CDF, and PMF. Unlike
<code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code>, this function handles its computation
differently based on the output type. For the CDF, PMF, and mean output
types, the linear pool method is equivalent to calling
<code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> with a mean aggregation function, since
<code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> produces a linear pool prediction (an
average of individual model cumulative or bin probabilities).</p>
<p>For the quantile output type, the <code><a href="../reference/linear_pool.html">linear_pool()</a></code> function
first must approximate a full probability distribution using the
value-quantile level pairs from each component model. As a default, this
is done with functions in the <code>distfromq</code> package, which
defaults to fitting a monotonic cubic spline for the interior and a
Gaussian normal distribution for the tails. Quasi-random samples are
drawn from each distributional estimate, which are then collected and
used to extract the desired quantiles from the final ensemble
distribution.</p>
<p>Using the default options for <code><a href="../reference/linear_pool.html">linear_pool()</a></code>, we can
generate an equally-weighted linear pool for each of the output types in
our example hub (except for the median and sample output types, which
must be excluded). The resulting distribution for the linear pool of
quantiles is estimated using a default of <code>n_samples = 1e4</code>
quasi-random samples drawn from the distribution of each component
model.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linear_pool_norm</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">output_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"sample"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/linear_pool.html">linear_pool</a></span><span class="op">(</span>model_id <span class="op">=</span> <span class="st">"linear-pool-normal"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linear_pool_norm</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 9</span></span></span>
<span><span class="co">#&gt;    model_id           reference_date target           horizon location target_end_date output_type output_type_id  value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.25           0.017<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.5            0.118 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.75           0.550 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1              0.819 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.25           0.919 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.5            0.968 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.75           0.990 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10             1     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10.25          1     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> linear-pool-normal 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10.5           1</span></span></code></pre></div>
<p>In the figure below, we compare ensemble results generated by
<code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> and <code><a href="../reference/linear_pool.html">linear_pool()</a></code> for model
outputs of output types PMF and quantile. Panel A shows PMF type
predictions of Massachusetts incident influenza hospitalization
intensity while Panel B shows quantile type predictions of Massachusetts
weekly incident influenza hospitalizations. As expected, the results
from the two functions are equivalent for the PMF output type: for this
output type, the <code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> method averages the
predicted probability of each category across the component models,
which is the definition of the linear pool ensemble method. This is not
the case for the quantile output type, because the
<code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code> is computing a quantile average.</p>
<p><img src="hubEnsembles_files/figure-html/plot-ex-quantile-and-linear-pool-1.png" width="960"></p>
<p>Like with <code><a href="../reference/simple_ensemble.html">simple_ensemble()</a></code>, we can change the default
aggregation settings. For example, weights that determine a model’s
contribution to the resulting ensemble may be provided.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  model_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MOBS-GLEAM_FLUH"</span>, <span class="st">"PSI-DICE"</span>, <span class="st">"Flusight-baseline"</span><span class="op">)</span>,</span>
<span>  weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">weighted_linear_pool_norm</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">output_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"sample"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/linear_pool.html">linear_pool</a></span><span class="op">(</span></span>
<span>    weights <span class="op">=</span> <span class="va">model_weights</span>,</span>
<span>    model_id <span class="op">=</span> <span class="st">"linear-pool-weighted"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">weighted_linear_pool_norm</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 9</span></span></span>
<span><span class="co">#&gt;    model_id             reference_date target           horizon location target_end_date output_type output_type_id  value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.25           0.012<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.5            0.115 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         0.75           0.546 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1              0.805 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.25           0.910 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.5            0.964 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         1.75           0.989 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10             1     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10.25          1     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> linear-pool-weighted 2022-11-19     wk flu hosp rate       0 25       2022-11-19      cdf         10.5           1</span></span></code></pre></div>
<p>We can also change the distribution that <code>distfromq</code> uses
to estimate the component models’ distributional tails to either log
normal or Cauchy using the <code>tail_dist</code> argument. (See
documentation in the <code>distfromq</code> package for more details and
function options.) Note, though, that the choice of tail distribution
usually does not have a large impact on the resulting ensemble
distribution, except in its outer edges.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linear_pool_lnorm</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">output_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"sample"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/linear_pool.html">linear_pool</a></span><span class="op">(</span></span>
<span>    model_id <span class="op">=</span> <span class="st">"linear-pool-lognormal"</span>,</span>
<span>    tail_dist <span class="op">=</span> <span class="st">"lnorm"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">linear_pool_cauchy</span> <span class="op">&lt;-</span> <span class="fu">hubExamples</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hubExamples/man/forecast_data.html" class="external-link">forecast_outputs</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">output_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"sample"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hubEnsembles</span><span class="fu">::</span><span class="fu"><a href="../reference/linear_pool.html">linear_pool</a></span><span class="op">(</span></span>
<span>    model_id <span class="op">=</span> <span class="st">"linear-pool-cauchy"</span>,</span>
<span>    tail_dist <span class="op">=</span> <span class="st">"cauchy"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Evan L Ray, Li Shandross, Emily Howerton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer>
</div>





  </body>
</html>
